!function(e,t,i){var n,s=t.event;s.special.smartresize={setup:function(){t(this).bind("resize",s.special.smartresize.handler)},teardown:function(){t(this).unbind("resize",s.special.smartresize.handler)},handler:function(e,t){var i=this,s=arguments;e.type="smartresize",n&&clearTimeout(n),n=setTimeout(function(){jQuery.event.handle.apply(i,s)},"execAsap"===t?0:100)}},t.fn.smartresize=function(e){return e?this.bind("smartresize",e):this.trigger("smartresize",["execAsap"])},t.Accordion=function(e,i){this.$el=t(i),this.$items=this.$el.children("ul").children("li"),this.itemsCount=this.$items.length,this._init(e)},t.Accordion.defaults={open:-1,oneOpenedItem:!1,speed:600,easing:"easeInOutExpo",scrollSpeed:900,scrollEasing:"easeInOutExpo"},t.Accordion.prototype={_init:function(e){this.options=t.extend(!0,{},t.Accordion.defaults,e),this._validate(),this.current=this.options.open,this.$items.find("div.st-content").hide(),this._saveDimValues(),-1!=this.current&&this._toggleItem(this.$items.eq(this.current)),this._initEvents()},_saveDimValues:function(){this.$items.each(function(){var e=t(this);Modernizr.touch?e.data({originalHeight:e.find("a:first").height(),offsetTop:e.offset().top}):e.data({originalHeight:e.find("a:first").height(),offsetTop:e.offset().top-80})})},_validate:function(){(this.options.open<-1||this.options.open>this.itemsCount-1)&&(this.options.open=-1)},_initEvents:function(){var i=this;this.$items.find("a:first").bind("click.accordion",function(e){var n=t(this).parent();return i.options.oneOpenedItem&&i._isOpened()&&i.current!==n.index()&&i._toggleItem(i.$items.eq(i.current)),i._toggleItem(n),!1}),t(e).bind("smartresize.accordion",function(e){i._saveDimValues(),i.$el.find("li.st-open").each(function(){var e=t(this);e.css("height",e.data("originalHeight")+e.find("div.st-content").outerHeight(!0))}),i._isOpened()&&i._scroll()})},_isOpened:function(){return this.$el.find("li.st-open").length>0},_toggleItem:function(e){var t=e.find("div.st-content");e.hasClass("st-open")?(this.current=-1,t.stop(!0,!0).fadeOut(this.options.speed),e.removeClass("st-open").stop().animate({height:e.data("originalHeight")},this.options.speed,this.options.easing)):(this.current=e.index(),t.stop(!0,!0).fadeIn(this.options.speed),e.addClass("st-open").stop().animate({height:e.data("originalHeight")+t.outerHeight(!0)},this.options.speed,this.options.easing),this._scroll(this))},_scroll:function(e){var i;i=-1!==(e=e||this).current?e.current:e.$el.find("li.st-open:last").index(),t("html, body").stop().animate({scrollTop:e.options.oneOpenedItem?e.$items.eq(i).data("offsetTop"):e.$items.eq(i).offset().top},e.options.scrollSpeed,e.options.scrollEasing)}};var o=function(e){this.console&&console.error(e)};t.fn.accordion=function(e){if("string"==typeof e){var i=Array.prototype.slice.call(arguments,1);this.each(function(){var n=t.data(this,"accordion");n?t.isFunction(n[e])&&"_"!==e.charAt(0)?n[e].apply(n,i):o("no such method '"+e+"' for accordion instance"):o("cannot call methods on accordion prior to initialization; attempted to call method '"+e+"'")})}else this.each(function(){t.data(this,"accordion")||t.data(this,"accordion",new t.Accordion(e,this))});return this}}(window,jQuery);